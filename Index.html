<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


    <style type="text/css">
        #mynetwork {
            width: 95vw;
            height: 95vh;
            border: 1px solid lightgray;
        }
    </style>
</head>
<body>
<div id="mynetwork"></div>
<input type="checkbox" id="fixed">
<input type="color" id="parseColor">
<input type="text" placeholder="Address" id="node_address_input">
<input type="button" onclick="clusterByConnection()" value="Cluster node and its connections"/>
<script type="text/javascript">
    var network;

    var nodes = new vis.DataSet();
    var edges = new vis.DataSet();
    var gephiImported;
    var fixedCheckbox = document.getElementById("fixed");
    fixedCheckbox.onchange = redrawAll;

    var parseColorCheckbox = document.getElementById("parseColor");
    parseColorCheckbox.onchange = redrawAll;

    var nodeContent = document.getElementById("nodeContent");

    var theJson = "";
    $.getJSON("myGraph.json", function() {
        console.log( "success" );
    }).done(function(data){
        theJson = data;
        redrawAll(theJson);
    });

    var container = document.getElementById("mynetwork");
    var data = {
        nodes: nodes,
        edges: edges
    };
    var options = {
        nodes: {
            shape: "dot",
            font: {
                face: "Tahoma"
            }
        },
        edges: {
            width: 0.15,
            smooth: {
                type: "continuous"
            }
        },
        interaction: {
            tooltipDelay: 200,
            hideEdgesOnDrag: true
        },
        physics: {
            stabilization: false,
            barnesHut: {
                gravitationalConstant: -10000,
                springConstant: 0.002,
                springLength: 150
            }
        },
        joinCondition:function(nodeOptions) {
            return nodeOptions.cid === 1;
        }
    };

    network = new vis.Network(container, data, options);
    network.on("click", function(params) {
        if (params.nodes.length > 0) {
            var data = nodes.get(params.nodes[0]); // get the data from selected node
            nodeContent.innerHTML = JSON.stringify(data, undefined, 3); // show the data in the div
        }
    });

    /**
     * This function fills the DataSets. These DataSets will update the network.
     */
    function redrawAll(gephiJSON) {
        if (gephiJSON.nodes === undefined) {
            gephiJSON = gephiImported;
        } else {
            gephiImported = gephiJSON;
        }

        nodes.clear();
        edges.clear();

        var fixed = fixedCheckbox.checked;
        var parseColor = parseColorCheckbox.checked;

        var parsed = vis.parseGephiNetwork(gephiJSON, {
            fixed: false,
            parseColor: false
        });

        // add the parsed data to the DataSets.
        nodes.add(parsed.nodes);
        edges.add(parsed.edges);

        var data = nodes.get(2); // get the data from node 2 as example
        nodeContent.innerHTML = JSON.stringify(data, undefined, 3); // show the data in the div
        network.fit(); // zoom to fit
        network.on("selectNode", function(params) {
            if (params.nodes.length === 1) {
                if (network.isCluster(params.nodes[0]) === true) {
                    network.openCluster(params.nodes[0]);
                }
            }
        });
        function clusterByConnection() {
            network.setData(data);
            network.clusterByConnection(document.getElementById("node_address_input").value);
        }
    }
</script>
<!--<script>-->
<!--    var network;-->

<!--    var nodes = new vis.DataSet();-->
<!--    var edges = new vis.DataSet();-->
<!--    var gephiImported;-->
<!--    var fixedCheckbox = document.getElementById("fixed");-->
<!--    fixedCheckbox.onchange = redrawAll;-->

<!--    var parseColorCheckbox = document.getElementById("parseColor");-->
<!--    parseColorCheckbox.onchange = redrawAll;-->

<!--    var nodeContent = document.getElementById("nodeContent");-->

<!--    loadJSON("myGraph.json", redrawAll, function(err) {-->
<!--        console.log("error");-->
<!--    });-->

<!--    var container = document.getElementById("mynetwork");-->
<!--    var data = {-->
<!--        nodes: nodes,-->
<!--        edges: edges-->
<!--    };-->
<!--    var options = {-->
<!--        nodes: {-->
<!--            shape: "dot",-->
<!--            font: {-->
<!--                face: "Tahoma"-->
<!--            }-->
<!--        },-->
<!--        edges: {-->
<!--            width: 0.15,-->
<!--            smooth: {-->
<!--                type: "continuous"-->
<!--            }-->
<!--        },-->
<!--        interaction: {-->
<!--            tooltipDelay: 200,-->
<!--            hideEdgesOnDrag: true-->
<!--        },-->
<!--        physics: {-->
<!--            stabilization: false,-->
<!--            barnesHut: {-->
<!--                gravitationalConstant: -10000,-->
<!--                springConstant: 0.002,-->
<!--                springLength: 150-->
<!--            }-->
<!--        }-->
<!--    };-->

<!--    network = new vis.Network(container, data, options);-->
<!--    network.on("click", function(params) {-->
<!--        if (params.nodes.length > 0) {-->
<!--            var data = nodes.get(params.nodes[0]); // get the data from selected node-->
<!--            nodeContent.innerHTML = JSON.stringify(data, undefined, 3); // show the data in the div-->
<!--        }-->
<!--    });-->

<!--    /**-->
<!--     * This function fills the DataSets. These DataSets will update the network.-->
<!--     */-->
<!--    function redrawAll(gephiJSON) {-->
<!--        if (gephiJSON.nodes === undefined) {-->
<!--            gephiJSON = gephiImported;-->
<!--        } else {-->
<!--            gephiImported = gephiJSON;-->
<!--        }-->

<!--        nodes.clear();-->
<!--        edges.clear();-->

<!--        var fixed = fixedCheckbox.checked;-->
<!--        var parseColor = parseColorCheckbox.checked;-->

<!--        var parsed = vis.parseGephiNetwork(gephiJSON, {-->
<!--            fixed: fixed,-->
<!--            parseColor: parseColor-->
<!--        });-->

<!--        // add the parsed data to the DataSets.-->
<!--        nodes.add(parsed.nodes);-->
<!--        edges.add(parsed.edges);-->

<!--        var data = nodes.get(2); // get the data from node 2 as example-->
<!--        nodeContent.innerHTML = JSON.stringify(data, undefined, 3); // show the data in the div-->
<!--        network.fit(); // zoom to fit-->
<!--    }-->

<!--</script>-->
</body>
</html>